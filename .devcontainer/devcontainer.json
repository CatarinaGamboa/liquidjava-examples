{
  "name": "LiquidJava Extension Dev",
  "image": "mcr.microsoft.com/devcontainers/javascript-node:20",
  "customizations": {
    "vscode": {
      "extensions": [
        "vscjava.vscode-java-pack",
        "./extension/liquid-java-0.0.15.vsix"
      ],
      "settings": {
        "terminal.integrated.defaultProfile.linux": "bash"
      }
    }
  },
  "features": {
    "ghcr.io/devcontainers/features/java:1": {
      "version": "21"
    },
    "ghcr.io/devcontainers/features/git-lfs:1": {}
  },
  "postCreateCommand": "echo '👉 Starting setup...' > /tmp/setup-log.txt && git lfs install >> /tmp/setup-log.txt 2>&1 && echo '🔄 Pulling LFS files...' >> /tmp/setup-log.txt && git lfs pull >> /tmp/setup-log.txt 2>&1 && echo '✅ Git LFS setup complete!' >> /tmp/setup-log.txt",
  "postStartCommand": "if [ -d './examples/demo/src/' ]; then echo '✅ Examples directory found at ./examples/demo/src/' >> /tmp/setup-log.txt; else echo '❌ Examples directory not found' >> /tmp/setup-log.txt; fi",
  "postAttachCommand": {
    "notifyCompletion": "echo '\n\n==========================================\n🎉 SETUP COMPLETE: LiquidJava Extension Development Environment is ready!\n==========================================\n\n📋 SETUP REPORT:' && if grep -q 'Git LFS setup complete' /tmp/setup-log.txt; then echo '✅ Git LFS configured successfully'; else echo '❌ Git LFS setup failed'; fi && if grep -q 'Examples directory found' /tmp/setup-log.txt; then echo '✅ Examples directory located'; else echo '❌ Examples directory not found'; fi && echo '\nYour extension should be installed via the devcontainer.json customizations.\nTo open the examples directory, use File > Open Folder... and navigate to examples/demo/src/\n'"
  }
}
